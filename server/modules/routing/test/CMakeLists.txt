find_library(MYSQLCLIENT_LIBARIES NAMES mysqlclient PATH_SUFFIXES mysql mariadb)
if(MYSQLCLIENT_LIBRARIES MATCHES "NOTFOUND")
  message(WARNING "Cannot find libmysqlclient. Login tests disabled.")
else()
  add_executable(testconnect testconnect.c)
  target_link_libraries(testconnect ${MYSQLCLIENT_LIBARIES})
  add_test(NAME ReadConnRouterLoginTest COMMAND $<TARGET_FILE:testconnect> 10000 ${TEST_HOST} ${MASTER_PORT} ${TEST_HOST} ${TEST_PORT})
endif()