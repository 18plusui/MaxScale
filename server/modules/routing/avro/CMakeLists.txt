if(AVRO_FOUND)
  include_directories(${AVRO_INCLUDE_DIR})
  add_library(avrorouter SHARED avro.c ../binlog/binlog_common.c avro_client.c avro_schema.c avro_rbr.c avro_file.c avro_index.c)
  set_target_properties(avrorouter PROPERTIES VERSION "1.0.0")
  set_target_properties(avrorouter PROPERTIES LINK_FLAGS -Wl,-z,defs)
  target_link_libraries(avrorouter maxscale-common jansson ${AVRO_LIBRARIES} maxavro sqlite3 lzma)
  install(TARGETS avrorouter DESTINATION ${MAXSCALE_LIBDIR})
  install(PROGRAMS cdc DESTINATION ${MAXSCALE_BINDIR})
  install(PROGRAMS cdc_users DESTINATION ${MAXSCALE_BINDIR})
  install(PROGRAMS cdc_last_transaction DESTINATION ${MAXSCALE_BINDIR})
  install(PROGRAMS cdc_kafka_producer DESTINATION ${MAXSCALE_BINDIR})
  install(FILES cdc_schema.go DESTINATION ${MAXSCALE_SHAREDIR})
else()
  message(STATUS "Avro C libraries were not found, avrorouter will not be built.")
endif()
